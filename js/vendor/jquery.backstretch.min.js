!function(t,i,e){"use strict";t.fn.backstretch=function(e,s){return 0===t(i).scrollTop()&&i.scrollTo(0,0),this.each(function(){var i=t(this),n=i.data("backstretch");if(n){if("string"==typeof e&&"function"==typeof n[e])return void n[e](s);s=t.extend(n.options,s),n.hasOwnProperty("destroy")&&n.destroy(!0)}if(!e||e&&0===e.length){var o=i.css("background-image");o&&"none"!==o?e=[i.css("backgroundImage").replace(/url\(|\)|"|'/g,"")]:t.error("No images were supplied for Backstretch, or element must have a CSS-defined background image.")}n=new r(this,e,s||{}),i.data("backstretch",n)})},t.backstretch=function(i,e){return t("body").backstretch(i,e).data("backstretch")},t.expr[":"].backstretch=function(i){return void 0!==t(i).data("backstretch")},t.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0,fadeFirst:!0,alignX:"auto",alignY:"auto",paused:!1,start:0,preload:2,preloadSize:1};var s={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxWidth:"none",zIndex:-999999}},n=function(){var i=function(t){for(var i=1;i<t.length;i++){for(var e=t[i],s=i;t[s-1]&&parseInt(t[s-1].width,10)>parseInt(e.width,10);)t[s]=t[s-1],--s;t[s]=e}return t},e=function(t,i){for(var e=0;e<i.length&&i[e].width<t;)e++;return i[e-1].url};return function(s,n){for(var o=s.width(),r=s.height(),a=[],h=function(t,i){return"width"===i?o:"height"===i?r:t},c=0;c<n.length;c++)if(t.isArray(n[0])){n[c]=i(n[c]);var d=e(o,n[c]);a.push(d)}else{var g=n[c].replace(/{{(width|height)}}/g,h);a.push(g)}return a}}(),o=function(i,e,s,n,o){var r=[],a=function(t){for(var i=0;i<r.length;i++)if(r[i].src===t.src)return r[i];return r.push(t),t},h=function(t,i,e){"function"==typeof i&&i.call(t,e)};return function i(e,s,n,o,r){if(void 0!==e){"string"==typeof e&&(e=[e]),arguments.length<5&&"function"==typeof arguments[arguments.length-1]&&(r=arguments[arguments.length-1]),s="function"!=typeof s&&s?s:0,n="function"==typeof n||!n||0>n?e.length:Math.min(n,e.length),o="function"!=typeof o&&o?o:1,s>=e.length&&(s=0,n=0),0>o&&(o=n),o=Math.min(o,n);var c=e.slice(s+o,n-o);if(e=e.slice(s,o),!(n=e.length))return void h(e,r,!0);for(var d,g=0,u=function(){++g===n&&(h(e,r,!c),i(c,0,0,o,r))},p=0;p<e.length;p++)d=new Image,d.src=e[p],d=a(d),d.complete?u():t(d).on("load error",u)}}}(),r=function(e,r,h){this.options=t.extend({},t.fn.backstretch.defaults,h||{}),this.firstShow=!0,this.options.centeredX="auto"!==this.options.alignX?"center"===this.options.alignX:this.options.centeredX,this.options.centeredY="auto"!==this.options.alignY?"center"===this.options.alignY:this.options.centeredY,this.images=t.isArray(r)?r:[r],this.options.paused&&(this.paused=!0),this.options.start>=this.images.length&&(this.options.start=this.images.length-1),this.options.start<0&&(this.options.start=0),this.isBody=e===document.body,this.$container=t(e),this.$root=this.isBody?t(a?i:document):this.$container,this.originalImages=this.images,this.images=n(this.$root,this.originalImages),o(this.images,this.options.start||0,this.options.preload||1);var c=this.$container.children(".backstretch").first();if(this.$wrap=c.length?c:t('<div class="backstretch"></div>').css(s.wrap).appendTo(this.$container),!this.isBody){var d=this.$container.css("position"),g=this.$container.css("zIndex");this.$container.css({position:"static"===d?"relative":d,zIndex:"auto"===g?0:g,background:"none"}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&a?"fixed":"absolute"}),this.index=this.options.start,this.show(this.index),t(i).on("resize.backstretch",t.proxy(this.resize,this)).on("orientationchange.backstretch",t.proxy(function(){this.isBody&&0===i.pageYOffset&&(i.scrollTo(0,1),this.resize())},this))};r.prototype={resize:function(){try{var e=this.$root.width(),s=this.$root.height(),r=e/(this._lastResizeContainerWidth||0),a=s/(this._lastResizeContainerHeight||0);if((.9>r||r>1.1||isNaN(r)||.9>a||a>1.1||isNaN(a))&&(this._lastResizeContainerWidth=e,this._lastResizeContainerHeight=s,this.images=n(this.$root,this.originalImages),this.options.preload&&o(this.images,(this.index+1)%this.images.length,this.options.preload),1===this.images.length&&this._currentImageSrc!==this.images[0])){var h=this;clearTimeout(h._selectAnotherResolutionTimeout),h._selectAnotherResolutionTimeout=setTimeout(function(){h.show(0)},2500)}var c,d={left:0,top:0,right:"auto",bottom:"auto"},g=this.isBody?this.$root.width():this.$root.innerWidth(),u=g,p=this.isBody?i.innerHeight?i.innerHeight:this.$root.height():this.$root.innerHeight(),l=u/this.$img.data("ratio"),f=t.Event("backstretch.resize",{relatedTarget:this.$container[0]});l>=p?(c=(l-p)/2,this.options.centeredY?d.top="-"+c+"px":"bottom"===this.options.alignY&&(d.top="auto",d.bottom=0)):(l=p,u=l*this.$img.data("ratio"),c=(u-g)/2,this.options.centeredX?d.left="-"+c+"px":"right"===this.options.alignX&&(d.left="auto",d.right=0)),this.$wrap.css({width:g,height:p}).find("img:not(.deleteable)").css({width:u,height:l}).css(d),this.$container.trigger(f,this)}catch(t){}return this},show:function(i){if(!(Math.abs(i)>this.images.length-1)){var e=this,n=e.$wrap.find("img").addClass("deleteable"),o={relatedTarget:e.$container[0]};return e.$container.trigger(t.Event("backstretch.before",o),[e,i]),this.index=i,clearTimeout(e._cycleTimeout),e.$img=t("<img />").css(s.img).bind("load",function(s){var r=this.width||t(s.target).width(),a=this.height||t(s.target).height();t(this).data("ratio",r/a);var h=function(){n.remove(),!e.paused&&e.images.length>1&&e.cycle(),t(["after","show"]).each(function(){e.$container.trigger(t.Event("backstretch."+this,o),[e,i])})};e.firstShow&&!e.options.fadeFirst?(t(this).show(),h()):t(this).fadeIn(e.options.speed||e.options.fade,h),e.firstShow=!1,e.resize()}).appendTo(e.$wrap),e.$img.attr("src",e.images[i]),e._currentImageSrc=e.images[i],e}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.cycle(),this},cycle:function(){return this.images.length>1&&(clearTimeout(this._cycleTimeout),this._cycleTimeout=setTimeout(t.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(e){t(i).off("resize.backstretch orientationchange.backstretch"),clearTimeout(this._cycleTimeout),e||this.$wrap.remove(),this.$container.removeData("backstretch")}};var a=function(){var t=navigator.userAgent,e=navigator.platform,s=t.match(/AppleWebKit\/([0-9]+)/),n=!!s&&s[1],o=t.match(/Fennec\/([0-9]+)/),r=!!o&&o[1],a=t.match(/Opera Mobi\/([0-9]+)/),h=!!a&&a[1],c=t.match(/MSIE ([0-9]+)/),d=!!c&&c[1];return!((e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1||e.indexOf("iPod")>-1)&&n&&534>n||i.operamini&&"[object OperaMini]"==={}.toString.call(i.operamini)||a&&7458>h||t.indexOf("Android")>-1&&n&&533>n||r&&6>r||"palmGetResource"in i&&n&&534>n||t.indexOf("MeeGo")>-1&&t.indexOf("NokiaBrowser/8.5.0")>-1||d&&6>=d)}()}(jQuery,window);